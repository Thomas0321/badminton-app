# 羽球揪團平台

一個功能完整的羽球揪團網站，讓球友們可以輕鬆建立隊伍、加入活動，並享受羽球的樂趣！

## 🏸 主要功能

### 📋 個人檔案設定
- 暱稱、性別、球齡設定
- 擅長位置、技術水平選擇
- 常用地區與通知偏好設定

### 🏠 首頁功能
- **📥 加入隊伍**：瀏覽並報名參加他人建立的隊伍
- **➕ 建立隊伍**：自行創建新隊伍，招募球友

### 🔍 智能篩選
- 縣市/區域篩選
- 球場地點搜尋
- 時段篩選（平日/假日，上午/下午/晚間）
- 技術水平需求篩選
- 剩餘人數顯示

### 📋 隊伍資訊卡片
- 隊伍名稱與主辦者資訊
- 活動時間與場地詳細資訊
- 已報名人數/剩餘名額（每隊限4人）
- 活動類型標籤
- 候補登記功能

### 💬 討論與溝通
- 公開留言板供所有使用者討論
- 支援文字留言與@提及功能
- 隊伍滿員後自動建立私人聊天室
- 活動前自動提醒通知

### ⚖️ 責任制度
- 24小時內取消報名視為「臨時取消」
- 臨時取消者禁止參與活動7天
- 取消次數記錄作為信譽評價參考

## 🚀 快速開始

### 環境需求
- Python 3.8+
- Flask 2.3+
- SQLite 資料庫

### 安裝步驟

1. **安裝相依套件**
   ```bash
   pip install -r requirements.txt
   ```

2. **啟動應用程式**
   ```bash
   python app.py
   ```

3. **開啟瀏覽器**
   ```
   http://localhost:5000
   ```

### 初次使用
1. 首次訪問會自動導向個人檔案設定頁面
2. 完成基本資料填寫後即可開始使用
3. 可以選擇「加入隊伍」瀏覽現有活動，或「建立隊伍」發起新活動

## 📱 使用流程

### 設定個人檔案
1. 填寫暱稱、性別、球齡
2. 選擇擅長位置（前場/後場/左邊/右邊/不限）
3. 設定技術水平（初學到競技）
4. 選擇常用地區
5. 設定通知偏好

### 加入隊伍
1. 在首頁點選「📥 加入隊伍」
2. 使用篩選功能找到合適的隊伍
3. 點選隊伍卡片查看詳細資訊
4. 在詳細頁面點選「我要加入」或「候補登記」
5. 加入成功後可在討論區與其他成員溝通

### 建立隊伍
1. 點選「➕ 建立隊伍」
2. 填寫隊伍基本資訊：
   - 隊伍名稱
   - 活動地點（縣市 + 球場名 + 地址）
   - 活動時間（開始與結束時間）
   - 招募人數（最多4人）
   - 活動類型（初學練習、雙打為主等）
   - 活動說明與備註
3. 可選擇上傳封面圖片
4. 建立後自動顯示於公開隊伍清單

## 🛡️ 責任制度說明

為維持活動品質與隊伍運作穩定性：

- **臨時取消定義**：活動開始前24小時內取消報名
- **懲罰措施**：禁止報名或建立任何隊伍7天
- **信譽記錄**：系統記錄取消次數作為未來參考
- **例外情況**：候補名單取消不計入懲罰

## 🎨 技術特色

### 前端技術
- **Bootstrap 5**：響應式設計，支援各種裝置
- **Font Awesome**：豐富的圖示系統
- **原生 JavaScript**：流暢的使用者體驗
- **CSS3 動畫**：優雅的視覺效果

### 後端技術
- **Flask**：輕量級 Python Web 框架
- **SQLAlchemy**：強大的 ORM 資料庫操作
- **SQLite**：輕量級資料庫，適合快速部署
- **RESTful API**：標準化的 API 設計

### 資料庫設計
- **User**：使用者基本資料與偏好設定
- **Team**：隊伍資訊與活動詳細
- **TeamMember**：成員關係與候補狀態
- **TeamMessage**：討論留言系統
- **Cancellation**：取消記錄與懲罰追蹤

## 🔧 自訂設定

### 修改隊伍人數限制
在 `app.py` 中修改 `max_participants` 的預設值和驗證邏輯。

### 調整懲罰期間
在 `leave_team` 路由中修改 `timedelta(days=7)` 的天數。

### 新增活動類型
在 `create_team.html` 的活動類型選單中新增選項。

### 擴充地區選項
在相關模板的地區選單中新增縣市選項。

## 📞 支援與回饋

如有任何問題或建議，歡迎透過以下方式聯繫：
- 建立 Issue 回報問題
- 提交 Pull Request 貢獻程式碼
- 聯繫開發團隊討論新功能

## 📄 授權條款

本專案採用 MIT 授權條款，詳見 LICENSE 檔案。

---

**開始您的羽球揪團之旅吧！** 🏸✨
 
## 🔐 必要環境變數（建議在雲端平台設定）

- SECRET_KEY：Flask session 加密金鑰（請使用隨機長字串）
- FLASK_DEBUG：本地除錯用（0/1，預設 0）。雲端請設 0
- PORT：埠號（雲端平台通常會自動注入）
- DATABASE_URL（選用）：改用雲端資料庫時使用。若未設定，系統將使用 SQLite 檔案（/data/badminton.db 或 ./badminton.db）

說明：`app.py` 中本地執行會依 `FLASK_DEBUG` 判斷是否啟用 debug；雲端環境使用 Procfile 由 gunicorn 啟動，不會跑到 `app.run()`。

## 🧪 本地開發與啟動

1) 安裝依賴
```
pip install -r requirements.txt
```

2) 設定環境變數（選擇性建議）
```
$env:FLASK_DEBUG="1"   # Windows PowerShell 範例
```

3) 啟動
```
python app.py
```

首次啟動會自動建立資料表（`db.create_all()`），無需額外遷移指令即可開始測試。

## ☁️ 雲端部署（Render/Heroku 等）

- 本專案已包含 `Procfile`：
```
web: gunicorn app:app
```
- requirements.txt 已列出必要套件（Flask、Flask-SQLAlchemy、Flask-Migrate、gunicorn）
- 在雲端平台設定環境變數：`SECRET_KEY`、`FLASK_DEBUG=0`
- 若平台提供永久儲存掛載（如 Render 的 /data），程式會優先使用 `/data/badminton.db` 與 `/data/uploads`

## 📞 手機號碼驗證（一致的前後端規範）

- 前端：`register.html` 與 `static/js/main.js` 強制只能輸入 10 碼數字，並即時過濾非數字
- 後端：在 `register` 與 `profile_setup` 路由中，會將電話移除非數字字元後檢查長度是否為 10，不符合將回傳錯誤
- 範例格式：`0912345678`

## ♿ 無障礙與互動體驗

- 按鈕 hover/active/disabled 轉場一致，提供位移與陰影回饋
- `:focus-visible` 明確的鍵盤焦點樣式（按鈕、表單）
- `prefers-reduced-motion` 自動降低動畫與轉場
- Hero 區塊背景、陰影、字重與字距已優化，並移除會覆蓋樣式的 inline style，統一由 `static/css/style.css` 控制

## 🗂️ 專案結構重點

- `app.py`：Flask 主程式與路由、SQLite 路徑判定（本地/雲端）
- `templates/`：Jinja2 模板（首頁、註冊、隊伍詳情、個人檔案、我的隊伍等）
- `static/css/style.css`：整體版面、Hero 區、按鈕與表單互動、無障礙樣式
- `static/js/main.js`：前端互動、表單驗證輔助、UI 小工具
- `requirements.txt`：部署依賴清單（含 gunicorn）
- `Procfile`：雲端啟動指令（gunicorn）

## 🧰 疑難排解

- 看不到最新的樣式：請在瀏覽器做硬重新整理（清除快取）
- 部署後 500 錯誤：請確認已設定 `SECRET_KEY`，且平台是否支援寫入 `/data`。必要時改用雲端資料庫並設定 `DATABASE_URL`
- Debug 設定：僅本地使用 `FLASK_DEBUG=1`，雲端請務必維持 `0`

PS C:\Python> cd 'c:\Python\app'
PS C:\Python\app> taskkill /F /IM python.exe

PS C:\Python\app> python app.py
